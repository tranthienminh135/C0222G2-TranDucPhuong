<app-navigation></app-navigation>
<header class="masthead">
  <div class="container px-4 px-lg-5 h-100">
    <div class="row gx-4 gx-lg-5 h-100 align-items-center justify-content-center text-center">
      <div class="col-lg-8 align-self-end">
        <h1 class="text-white font-weight-bold">Employee</h1>
        <hr class="divider"/>
      </div>
      <div class="col-lg-8 align-self-baseline">
        <p class="text-white-75 mb-5">"Stop worrying about potholes on the road and enjoy that journey".</p>
        <!-- Button trigger modal -->
        <button type="button" class="btn btn-outline-primary btn-lg" data-bs-toggle="modal"
                data-bs-target="#staticBackdropCreate">
          <i class="bi bi-plus-circle-fill"></i>
        </button>

        <!-- Modal -->
        <div class="modal fade" id="staticBackdropCreate" data-bs-backdrop="static" data-bs-keyboard="false"
             tabindex="-1"
             aria-labelledby="staticBackdropLabel" aria-hidden="true">
          <div class="modal-dialog modal-lg">
            <div class="modal-content">
              <div class="modal-header bg-primary text-light">
                <h5 class="modal-title" id="staticBackdropLabelCreate">Create Employee</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
              </div>
              <form [formGroup]="employeeForm" *ngIf="employeeForm" (ngSubmit)="createEmployee()">
                <div class="modal-body">
                  <div class="row g-3">

                    <div class="col-12">
                      <div class="form-floating mb-3">
                        <input class="form-control" id="name"
                               formControlName="name" name="name"
                               type="text" placeholder="Enter your name..."/>
                        <label for="name">Employee name</label>
                      </div>
                      <div class="text-danger"
                           *ngIf="employeeForm.controls.name.hasError('required')
                          && employeeForm.controls.name.touched">Name is not empty
                      </div>
                      <div class="text-danger"
                           *ngIf="employeeForm.controls.name.hasError('errName')
                          && employeeForm.controls.name.touched">Name invalid
                      </div>
                    </div>

                    <div class="col-4">
                      <div class="form-floating mb-3">
                        <input class="form-control" id="birthday" type="date"
                               placeholder="Enter your birthday..."
                               formControlName="birthday" name="birthday"/>
                        <label for="birthday">Birthday</label>
                      </div>
                      <div class="text-danger"
                           *ngIf="employeeForm.controls.birthday.hasError('required')
                          && employeeForm.controls.birthday.touched">Birthday is not empty
                      </div>
                      <div class="text-danger"
                           *ngIf="employeeForm.controls.birthday.hasError('age18')
                          && employeeForm.controls.birthday.touched">FBI warning: Your age must be over 18!
                      </div>
                    </div>

                    <div class="col-4">
                      <div class="form-floating mb-3">
                        <input class="form-control" id="address" type="text"
                               placeholder="Enter your id card..." formControlName="address" name="address"/>
                        <label for="address">Address</label>
                      </div>
                      <div class="text-danger"
                           *ngIf="employeeForm.controls.address.hasError('required')
                          && employeeForm.controls.address.touched">Address is not empty
                      </div>
                    </div>

                    <div class="col-4">
                      <div class="form-floating mb-3">
                        <input class="form-control" id="idCard" type="number"
                               placeholder="Enter your phone number..." formControlName="idCard" name="idCard"/>
                        <label for="idCard">Id Card</label>
                      </div>
                      <div class="text-danger"
                           *ngIf="employeeForm.controls.idCard.hasError('required')
                          && employeeForm.controls.idCard.touched">Id Card is not empty
                      </div>
                      <div class="text-danger"
                           *ngIf="employeeForm.controls.idCard.hasError('idCardExists')
                          && employeeForm.controls.idCard.touched">Id Card is exists!
                      </div>
                      <div class="text-danger"
                           *ngIf="employeeForm.controls.idCard.hasError('invalidIdCard')
                          && employeeForm.controls.idCard.touched">Id Card must have 9 or 12 numbers !
                      </div>
                    </div>

                    <div class="col-6">
                      <div class="form-floating mb-3">
                        <input class="form-control" id="phoneNumber"
                               formControlName="phoneNumber" name="phoneNumber"
                               type="text" placeholder="Enter your email..."/>
                        <label for="phoneNumber">Phone Number</label>
                      </div>
                      <div class="text-danger"
                           *ngIf="employeeForm.controls.phoneNumber.hasError('required')
                          && employeeForm.controls.phoneNumber.touched">Phone Number is not empty
                      </div>
                    </div>

                    <div class="col-6">
                      <div class="form-floating mb-3">
                        <input class="form-control" id="salary"
                               formControlName="salary" name="salary"
                               type="number" placeholder="Enter your salary..."/>
                        <label for="salary">Salary</label>
                      </div>
                      <div class="text-danger"
                           *ngIf="employeeForm.controls.salary.hasError('required')
                          && employeeForm.controls.salary.touched">Salary is not empty
                      </div>
                    </div>

                    <div class="col-12">
                      <div class="form-floating mb-3">
                        <input class="form-control" id="email" type="text"
                               formControlName="email" name="email"
                               placeholder="Enter your address..."/>
                        <label for="email">Email</label>
                      </div>
                      <div class="text-danger"
                           *ngIf="employeeForm.controls.email.hasError('required')
                          && employeeForm.controls.email.touched">Email is not empty
                      </div>
                      <div class="text-danger"
                           *ngIf="employeeForm.controls.email.hasError('emailExists')
                          && employeeForm.controls.email.touched">Email is exists!
                      </div>
                    </div>

                    <div class="col-12">
                      <div class="form-floating mb-3">
                        <select class="form-select" aria-label="Default select example"
                                formControlName="educationDegree" name="educationDegree"
                                style="padding-top: 0.625rem !important;">
                          <option value="" [selected]="true" [disabled]="true">Choice Education Degree</option>
                          <option *ngFor="let element of educationDegrees" [ngValue]="element">{{element.name}}</option>
                        </select>
                      </div>
                      <div class="text-danger"
                           *ngIf="employeeForm.controls.educationDegree.hasError('required')
                          && employeeForm.controls.educationDegree.touched">Choice education degree plz!
                      </div>
                    </div>

                    <div class="col-12">
                      <div class="form-floating mb-3">
                        <select class="form-select" aria-label="Default select example" formControlName="division"
                                name="division"
                                style="padding-top: 0.625rem !important;">
                          <option value="" [selected]="true" [disabled]="true">Choice Division</option>
                          <option *ngFor="let element of divisions" [ngValue]="element">{{element.name}}</option>
                        </select>
                      </div>
                      <div class="text-danger"
                           *ngIf="employeeForm.controls.division.hasError('required')
                          && employeeForm.controls.division.touched">Choice division plz!
                      </div>
                    </div>

                    <div class="col-12">
                      <div class="form-floating mb-3">
                        <select class="form-select" aria-label="Default select example" formControlName="position"
                                name="position"
                                style="padding-top: 0.625rem !important;">
                          <option value="" [selected]="true" [disabled]="true">Choice Position</option>
                          <option *ngFor="let element of positions" [ngValue]="element">{{element.name}}</option>
                        </select>
                      </div>
                      <div class="text-danger"
                           *ngIf="employeeForm.controls.position.hasError('required')
                          && employeeForm.controls.position.touched">Choice position plz!
                      </div>
                    </div>

                  </div>
                </div>
                <div class="modal-footer">
                  <button type="submit" class="btn btn-outline-primary">Save</button>
                  <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

<div class="container-fluid">
  <div class="container-fluid" id="content">
    <!-- Contact-->
    <section class="page-section" id="facility">
      <!--            <div class="row gx-4 gx-lg-5 justify-content-center"></div>-->
      <form [formGroup]="searchForm" (ngSubmit)="searchByName()" class="d-flex w-25 mb-3 m-auto">
        <input class="form-control me-2" type="search" formControlName="name" name="name"
               placeholder="Search by name" aria-label="Search">
        <button class="btn btn-outline-primary" type="submit"><i class="bi bi-search"></i></button>
      </form>
      <div *ngIf="isLoad == true">
        <table class="table table-hover text-center">
          <thead>
          <tr class="bg-primary text-white">
            <th>No.</th>
            <th>Name</th>
            <th>Birthday</th>
            <th>Salary</th>
            <th>Email</th>
            <th>Education Degree</th>
            <th>Division</th>
            <th>Position</th>
            <th colspan="3">Action</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let item of employeeList; index as i">
            <td>{{(i + 1) + size * pageNumber}}</td>
            <td>{{item.name}}</td>
            <td>{{item.birthday | date: 'dd-MM-yyyy'}}</td>
            <td>{{item.salary | currency: 'VND'}}</td>
            <td>{{item.email}}</td>
            <td>{{item.educationDegree.name}}</td>
            <td>{{item.division.name}}</td>
            <td>{{item.position.name}}</td>
            <td>
              <!-- Button trigger modal -->
              <button type="button" class="btn btn-outline-danger" data-bs-toggle="modal" title="Delete"
                      [attr.data-bs-target]="'#staticBackdropDelete' + item.id">
                <i class="bi bi-trash-fill"></i>
              </button>

              <!-- Modal -->
              <div class="modal fade" id="staticBackdropDelete{{item.id}}" data-bs-backdrop="static"
                   data-bs-keyboard="false"
                   tabindex="-1" aria-labelledby="staticBackdropLabelDelete" aria-hidden="true">
                <div class="modal-dialog">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title text-danger" id="staticBackdropLabelDelete">FBI warning!</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                      Do you want delete employee <span class="text-primary">{{item.name}}</span> ?
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-outline-primary" (click)="deleteEmployee(item.id)">Delete
                      </button>
                      <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Close</button>
                    </div>
                  </div>
                </div>
              </div>
            </td>
            <td>
              <button class="btn btn-outline-warning" [routerLink]="['/employee-edit', item.id]"><i
                class="bi bi-pencil-fill"></i>
              </button>
            </td>
            <td>
              <!-- Offcanvas Sidebar -->
              <div class="offcanvas offcanvas-end" id="demo{{item.id}}">
                <div class="offcanvas-header bg-info text-light">
                  <h3 class="offcanvas-title">Detail</h3>
                  <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"></button>
                </div>
                <div class="offcanvas-body">
                  <div class="card w-100" style="width: 18rem;">
                    <img
                      src="https://img.wattpad.com/7445666620289c3a53608229a3ad105dd5665c9f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f776174747061642d6d656469612d736572766963652f53746f7279496d6167652f4b4e47583765466f5130547177513d3d2d313032313936373233352e313636313062346466656439303039633437313539363139373538302e6a7067?s=fit&w=720&h=720"
                      class="card-img-top" alt="...">
                    <br class="breadcrumb-item">
                    <div class="card-title"><h3>{{item.name}}</h3></div>
                    <div class="card-body">
                      <table class="table-borderless">
                        <tr>
                          <th>Id:</th>
                          <td>{{item.id}}</td>
                        </tr>
                        <tr>
                          <th>Birthday:</th>
                          <td>{{item.birthday | date: 'dd-MM-yyyy'}}</td>
                        </tr>
                        <tr>
                          <th>Address:</th>
                          <td>{{item.address}}</td>
                        </tr>
                        <tr>
                          <th>Id Card:</th>
                          <td>{{item.idCard}}</td>
                        </tr>
                        <tr>
                          <th>PhoneNumber:</th>
                          <td>{{item.phoneNumber}}</td>
                        </tr>
                        <tr>
                          <th>Email:</th>
                          <td>{{item.email}}</td>
                        </tr>
                        <tr>
                          <th>Salary:</th>
                          <td>{{item.salary}}</td>
                        </tr>
                        <tr>
                          <th>EducationDegree:</th>
                          <td>{{item.educationDegree.name}}</td>
                        </tr>
                        <tr>
                          <th>Division:</th>
                          <td>{{item.division.name}}</td>
                        </tr>
                        <tr>
                          <th>Position:</th>
                          <td>{{item.position.name}}</td>
                        </tr>
                      </table>
                      <button class="btn btn-outline-secondary" type="button" data-bs-dismiss="offcanvas">Close</button>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Button to open the offcanvas sidebar -->
              <button type="button" class="btn btn-outline-info" data-bs-toggle="offcanvas"
                      [attr.data-bs-target]="'#demo' + item.id">
                <i class="bi bi-info-circle-fill"></i>
              </button>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
      <div *ngIf="isLoad == false">
        <div class="container-fluid m-auto text-center">
          <div class="spinner-border text-primary"></div>
        </div>
      </div>
      <div *ngIf="isLoad == null">
        <div class="container-fluid m-auto text-center">
          <table class="table table-hover">
            <tr class="bg-primary text-light">
              <th>No.</th>
              <th>Name</th>
              <th>Birthday</th>
              <th>Salary</th>
              <th>Email</th>
              <th>Education Degree</th>
              <th>Division</th>
              <th>Position</th>
              <th colspan="3">Action</th>
            </tr>
            <tr>
            </tr>
          </table>
          <div class="text-center">No data in table</div>
        </div>
      </div>
      <div class="container-fluid mt-3">
        <div>
          <ul class="pagination float-end">
            <div [ngSwitch]="pageNumber">
              <div *ngSwitchCase="0">
                <li class="page-item disabled">
                  <button type="button" class="page-link btn-outline-primary"><i
                    class="bi bi-caret-left-fill"></i></button>
                </li>
              </div>
              <div *ngSwitchDefault>
                <li class="page-item">
                  <button type="button" class="page-link btn-outline-primary disabled" (click)="previousPage()"><i
                    class="bi bi-caret-left-fill"></i></button>
                </li>
              </div>
            </div>
            <div *ngFor="let e of totalPages; index as i">
              <div ngSwitch="{{i}}">
                <div *ngSwitchCase="pageNumber">
                  <li class="page-item active">
                    <button type="button" class="page-link" (click)="changePage(i)">{{i + 1}}</button>
                  </li>
                </div>
                <div *ngSwitchDefault>
                  <li class="page-item">
                    <button type="button" class="page-link" (click)="changePage(i)">{{i + 1}}</button>
                  </li>
                </div>
              </div>
            </div>

            <div [ngSwitch]="pageNumber">
              <div *ngIf="totalPages">
                <div *ngSwitchCase="totalPages.length - 1">
                  <li class="page-item disabled">
                    <button type="button" class="page-link btn-outline-primary"><i class="bi bi-caret-right-fill"></i>
                    </button>
                  </li>
                </div>
              </div>
              <div *ngSwitchDefault>
                <li class="page-item">
                  <button type="button" class="page-link btn-outline-primary" (click)="nextPage()"><i
                    class="bi bi-caret-right-fill"></i></button>
                </li>
              </div>
            </div>
          </ul>
        </div>
      </div>
    </section>
  </div>
</div>
<!-- About-->
<section class="page-section bg-primary" id="about">
  <div class="container px-4 px-lg-5">
    <div class="row gx-4 gx-lg-5 justify-content-center">
      <div class="col-lg-8 text-center">
        <h2 class="text-white mt-0">We've got what you need!</h2>
        <hr class="divider divider-light"/>
        <p class="text-white-75 mb-4">"Every now and then go away, have a little relaxation, for when you come
          back to your work your judgment will be surer. Go some distance away because then the work appears
          smaller and more of it can be taken in at a glance and a lack of harmony and proportion is more
          readily seen". – Leonardo da Vinci.</p>
        <a class="btn btn-light btn-xl" href="#services">Get Started!</a>
      </div>
    </div>
  </div>
</section>
<!-- Services-->
<section class="page-section" id="services">
  <div class="container px-4 px-lg-5">
    <h2 class="text-center mt-0">At Your Service</h2>
    <hr class="divider"/>
    <div class="row gx-4 gx-lg-5">
      <div class="col-lg-3 col-md-6 text-center">
        <div class="mt-5">
          <div class="mb-2"><i class="bi-gem fs-1 text-primary"></i></div>
          <h3 class="h4 mb-2">Sturdy Themes</h3>
          <p class="text-muted mb-0">Our themes are updated regularly to keep them bug free!</p>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 text-center">
        <div class="mt-5">
          <div class="mb-2"><i class="bi-laptop fs-1 text-primary"></i></div>
          <h3 class="h4 mb-2">Up to Date</h3>
          <p class="text-muted mb-0">All dependencies are kept current to keep things fresh.</p>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 text-center">
        <div class="mt-5">
          <div class="mb-2"><i class="bi-globe fs-1 text-primary"></i></div>
          <h3 class="h4 mb-2">Ready to Publish</h3>
          <p class="text-muted mb-0">You can use this design as is, or you can make changes!</p>
        </div>
      </div>
      <div class="col-lg-3 col-md-6 text-center">
        <div class="mt-5">
          <div class="mb-2"><i class="bi-heart fs-1 text-primary"></i></div>
          <h3 class="h4 mb-2">Made with Love</h3>
          <p class="text-muted mb-0">Is it really open source if it's not made with love?</p>
        </div>
      </div>
    </div>
  </div>
</section>
<app-footer></app-footer>
